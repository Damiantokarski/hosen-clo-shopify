{{ 'section-hosen-carousel.css' | asset_url | stylesheet_tag }}

<div class="hosen-carousel{% if section.settings.full_width %} hosen-carousel--full-width{% endif %}" 
     data-autoplay="{{ section.settings.autoplay }}"
     data-autoplay-speed="{{ section.settings.autoplay_speed }}"
     style="--carousel-height-mobile: {{ section.settings.height_mobile }}px; --carousel-height-desktop: {{ section.settings.height_desktop }}px;">
  
  <div class="hosen-carousel__container">
    <div class="hosen-carousel__track">
      {% for section in section.blocks %}
        <div class="hosen-carousel__slide" {{ section.shopify_attributes }}>
          <div class="hosen-carousel__image-wrapper">
            {% if section.settings.image != blank %}
              <img 
                src="{{ section.settings.image | image_url: width: 1920 }}"
                srcset="{{ section.settings.image | image_url: width: 375 }} 375w,
                        {{ section.settings.image | image_url: width: 750 }} 750w,
                        {{ section.settings.image | image_url: width: 1100 }} 1100w,
                        {{ section.settings.image | image_url: width: 1500 }} 1500w,
                        {{ section.settings.image | image_url: width: 1920 }} 1920w"
                sizes="100vw"
                alt="{{ section.settings.image.alt | default: section.settings.heading }}"
                loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                class="hosen-carousel__image"
                width="{{ section.settings.image.width }}"
                height="{{ section.settings.image.height }}"
              >
            {% else %}
              <div class="hosen-carousel__placeholder">
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
              </div>
            {% endif %}
            <div class="hosen-carousel__overlay" style="--overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
          </div>
          
          <div class="hosen-carousel__content hosen-carousel__content--{{ section.settings.content_position }}">
            <div class="hosen-carousel__content-inner">
              {% if section.settings.subheading != blank %}
                <span class="hosen-carousel__subheading">{{ section.settings.subheading }}</span>
              {% endif %}
              
              {% if section.settings.heading != blank %}
                <h2 class="hosen-carousel__heading {{ section.settings.heading_size }}">{{ section.settings.heading }}</h2>
              {% endif %}
              
              {% if section.settings.text != blank %}
                <div class="hosen-carousel__text">{{ section.settings.text }}</div>
              {% endif %}
              
              {% if section.settings.button_label != blank %}
                <a href="{{ section.settings.button_link }}" class="hosen-button">
                  <span>{{ section.settings.button_label }}</span>
                  <span class="hosen-button__icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="7" y1="17" x2="17" y2="7"></line>
                      <polyline points="7 7 17 7 17 17"></polyline>
                    </svg>
                  </span>
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  
  {% if section.blocks.size > 1 %}
    <div class="hosen-carousel__navigation">
      <button class="hosen-carousel__nav-button hosen-carousel__nav-button--prev" aria-label="Previous slide">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <button class="hosen-carousel__nav-button hosen-carousel__nav-button--next" aria-label="Next slide">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </div>
    
    <div class="hosen-carousel__dots">
      {% for block in section.blocks %}
        <button class="hosen-carousel__dot{% if forloop.first %} hosen-carousel__dot--active{% endif %}" 
                aria-label="Go to slide {{ forloop.index }}"
                data-index="{{ forloop.index0 }}">
        </button>
      {% endfor %}
    </div>
  {% endif %}
</div>

<script src="{{ 'hosen-carousel.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "Hosen Carousel",
  "tag": "section",
  "class": "section-hosen-carousel",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Pełna szerokość",
      "default": true
    },
    {
      "type": "range",
      "id": "height_mobile",
      "min": 300,
      "max": 800,
      "step": 10,
      "unit": "px",
      "label": "Wysokość na mobile",
      "default": 500
    },
    {
      "type": "range",
      "id": "height_desktop",
      "min": 400,
      "max": 1000,
      "step": 10,
      "unit": "px",
      "label": "Wysokość na desktop",
      "default": 700
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Automatyczne przewijanie",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2,
      "max": 10,
      "step": 1,
      "unit": "s",
      "label": "Prędkość przewijania",
      "default": 5
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Przyciemnienie tła",
      "default": 20
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slajd",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Zdjęcie"
        },
        {
          "type": "text",
          "id": "subheading",
          "label": "Podtytuł"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Tytuł",
          "default": "BOLD PRINTS. BAGGY FITS. ACCESSORIES INCLUDED."
        },
        {
          "type": "select",
          "id": "heading_size",
          "options": [
            {
              "value": "h3",
              "label": "Mały"
            },
            {
              "value": "h2",
              "label": "Średni"
            },
            {
              "value": "h1",
              "label": "Duży"
            },
            {
              "value": "h0",
              "label": "Bardzo duży"
            }
          ],
          "default": "h1",
          "label": "Rozmiar tytułu"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Tekst",
          "default": "<p>Designed for effortless dressing, our casual wear and matching accessories keep you comfortable—and styled—all day long.</p>"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Tekst przycisku",
          "default": "SHOP ALL"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Link przycisku"
        },
        {
          "type": "select",
          "id": "content_position",
          "options": [
            {
              "value": "top-left",
              "label": "Góra lewo"
            },
            {
              "value": "top-center",
              "label": "Góra środek"
            },
            {
              "value": "top-right",
              "label": "Góra prawo"
            },
            {
              "value": "middle-left",
              "label": "Środek lewo"
            },
            {
              "value": "middle-center",
              "label": "Środek"
            },
            {
              "value": "middle-right",
              "label": "Środek prawo"
            },
            {
              "value": "bottom-left",
              "label": "Dół lewo"
            },
            {
              "value": "bottom-center",
              "label": "Dół środek"
            },
            {
              "value": "bottom-right",
              "label": "Dół prawo"
            }
          ],
          "default": "middle-center",
          "label": "Pozycja treści"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hosen Carousel",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
